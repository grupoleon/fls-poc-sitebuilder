# nixpacks.toml
# Force the PHP provider (since this repo doesn't have a composer.json or index.php)
providers = ["php"]

[variables]
# Use router.php as the fallback so nginx (PHP provider) routes like the built-in server
NIXPACKS_PHP_FALLBACK_PATH = "/router.php"

[phases.setup]
# Ensure the local web helper is executable inside the image
cmds = ["chmod +x ./web"]

[start]
# Start the app directly to bind to 0.0.0.0 so Kinsta's proxy can connect.
# Also print explicit startup message to logs for verification.
cmd = "echo \"Starting php dev server on 0.0.0.0:$PORT\" && exec php -S \"0.0.0.0:$PORT\" router.php"
